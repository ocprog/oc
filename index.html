<!-- c:\Users\sakamoto\python\testing_test\test99_etc\11-vr\index.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VR Controller Test</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- 新しいスクリプトファイルを読み込み -->
    <script src="simple-game.js"></script>
</head>
<body>
    <a-scene background="color: #222">
        
        <!-- プレイヤーリグ（カメラと手） -->
        <a-entity id="rig" position="0 0 0">
            <a-camera position="0 1.6 0"></a-camera>
            
            <!-- 左手: 手のモデルを表示。ボタンを押すとログが出る -->
            <a-entity id="leftHand" 
                      hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"
                      controller-logger="hand: left">
            </a-entity>

            <!-- 右手: レーザーポインターを表示。敵をクリックできる -->
            <a-entity id="rightHand" 
                      laser-controls="hand: right" 
                      raycaster="objects: .clickable; far: 50"
                      line="color: cyan; opacity: 0.75"
                      controller-logger="hand: right">
            </a-entity>
        </a-entity>

        <!-- UI: 画面正面にログとスコアを表示 -->
        <a-entity position="0 2 -3">
            <!-- 背景パネル -->
            <a-plane width="4" height="2.5" color="#000" opacity="0.7"></a-plane>
            
            <!-- スコア -->
            <a-text id="score-text" value="Score: 0" align="center" position="0 0.8 0.01" scale="2 2 2" color="#FFF"></a-text>
            
            <!-- HP -->
            <a-text id="hp-text" value="HP: 3" align="center" position="0 0.3 0.01" scale="2 2 2" color="#FF4444"></a-text>
            
            <!-- ログ（ボタン入力確認用） -->
            <a-text id="log-text" value="Press trigger to shoot" align="center" position="0 -0.2 0.01" color="#AAA"></a-text>

            <!-- リスタートボタン (初期は非表示) -->
            <a-entity id="restart-button" position="0 -0.8 0.1" visible="false" class="clickable">
                <a-plane width="2" height="0.6" color="#228822"></a-plane>
                <a-text value="RESTART" align="center" position="0 0 0.01" scale="2 2 2"></a-text>
            </a-entity>
        </a-entity>

        <!-- ゲーム管理（敵生成など） -->
        <a-entity game-manager></a-entity>

        <!-- 地面 -->
        <a-plane position="0 0 0" rotation="-90 0 0" width="20" height="20" color="#444"></a-plane>
        <a-grid helper geometry="primitive: plane; width: 20; height: 20" rotation="-90 0 0" material="src: url(https://cdn.aframe.io/a-painter/images/floor.jpg); repeat: 10 10; transparent: true; opacity: 0.5"></a-grid>
        
        <!-- 照明 -->
        <a-light type="ambient" color="#444"></a-light>
        <a-light type="directional" position="-1 2 1" intensity="0.8"></a-light>

    </a-scene>
</body>
</html>
